# =====================================================
# RESEARCHAI BACKEND - ENVIRONMENT CONFIGURATION
# Copy this file to .env and fill in your values
# =====================================================

# =====================================================
# CORE CONFIGURATION
# =====================================================

NODE_ENV=development
PORT=3000

# =====================================================
# SUPABASE (REQUIRED)
# Get these from: https://app.supabase.com/project/_/settings/api
# =====================================================

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# =====================================================
# REDIS (REQUIRED)
# Local: redis://localhost:6379
# Hosted: redis://username:password@host:port
# =====================================================

REDIS_URL=redis://localhost:6379

# =====================================================
# LLM PROVIDERS (At least ONE required, or use sandbox)
# =====================================================

# Option 1: Cerebras (Recommended - Fast & Cheap)
# Get key from: https://cerebras.ai
CEREBRAS_API_KEY=

# Option 2: HuggingFace (Fallback)
# Get key from: https://huggingface.co/settings/tokens
HUGGINGFACE_API_KEY=

# Option 3: Google Gemini (Alternative)
# Get key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=

# Sandbox Mode (No API key needed - for testing)
# Set to 'true' to force sandbox mode
USE_SANDBOX_MODE=false

# =====================================================
# RATE LIMITING (OPTIONAL - Defaults shown)
# =====================================================

# Humanizer rate limits
RATE_LIMIT_HUMANIZE_POINTS=20
RATE_LIMIT_HUMANIZE_DURATION=60
RATE_LIMIT_HUMANIZE_BLOCK_DURATION=60

# Chart generation rate limits
RATE_LIMIT_CHART_POINTS=10
RATE_LIMIT_CHART_DURATION=60
RATE_LIMIT_CHART_BLOCK_DURATION=120

# Paper metadata rate limits
RATE_LIMIT_PAPER_POINTS=50
RATE_LIMIT_PAPER_DURATION=60
RATE_LIMIT_PAPER_BLOCK_DURATION=30

# General API rate limits
RATE_LIMIT_API_POINTS=100
RATE_LIMIT_API_DURATION=60
RATE_LIMIT_API_BLOCK_DURATION=60

# =====================================================
# BACKGROUND JOBS (OPTIONAL - Defaults shown)
# =====================================================

# Job timeouts (milliseconds)
JOB_TIMEOUT_CHART=60000
JOB_TIMEOUT_PAPER=30000
JOB_TIMEOUT_HUMANIZE_PER_TEXT=10000

# Job retries
JOB_RETRY_CHART=3
JOB_RETRY_PAPER=3
JOB_RETRY_HUMANIZE=2

# Job retention
JOB_RETENTION_COMPLETED=100
JOB_RETENTION_FAILED=500

# =====================================================
# CHART GENERATION (OPTIONAL - Defaults shown)
# =====================================================

CHART_WIDTH=800
CHART_HEIGHT=600

# =====================================================
# EXTERNAL APIS (OPTIONAL)
# =====================================================

# OpenAlex (No key required - public API)
OPENALEX_EMAIL=your-email@example.com

# arXiv (No key required - public API)
# No configuration needed

# =====================================================
# DEBUGGING (OPTIONAL)
# =====================================================

# Logging level: debug | info | warn | error
LOG_LEVEL=info

# Debug specific services (comma-separated)
# Options: humanizer,charts,papers,jobs,ratelimit
DEBUG_SERVICES=

# =====================================================
# SECURITY (PRODUCTION)
# =====================================================

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3001

# JWT secret (for additional auth - if used)
JWT_SECRET=your-jwt-secret-here

# =====================================================
# Y.JS WEBSOCKET SERVER (OPTIONAL)
# =====================================================

YJS_WEBSOCKET_URL=ws://localhost:1234

# =====================================================
# MONITORING (OPTIONAL)
# =====================================================

# Sentry DSN for error tracking
SENTRY_DSN=

# =====================================================
# EXAMPLE CONFIGURATIONS
# =====================================================

# Minimal Development (Local testing with sandbox mode):
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=xxx
# REDIS_URL=redis://localhost:6379
# USE_SANDBOX_MODE=true

# Full Production (All features enabled):
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=xxx
# REDIS_URL=redis://username:password@host:port
# CEREBRAS_API_KEY=xxx
# GEMINI_API_KEY=xxx
# RATE_LIMIT_HUMANIZE_POINTS=10
# NODE_ENV=production

# Testing (Disabled rate limits):
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=xxx
# REDIS_URL=redis://localhost:6379
# USE_SANDBOX_MODE=true
# RATE_LIMIT_HUMANIZE_POINTS=1000
# RATE_LIMIT_CHART_POINTS=1000
